<app-breadcrumb *ngIf="currentClient != null" [title]="currentClient?.Nom + ' ' + currentClient?.Prenom" [items]="['Clients']" [active_item]="currentClient?.Nom + ' ' + currentClient?.Prenom"></app-breadcrumb>
<div class="container-fluid" *ngIf="currentClient != null">
  <div class="edit-profile">
    <div class="row">
      <div class="card">
        <!-- <div class="card-header">
          <h5>Détails client</h5>
        </div> -->
        <div class="card-body">
          <ul ngbNav #nav="ngbNav" [(activeId)]="activeTabId" (navChange)="onNavChange($event)" class="nav-tabs">
            <li [ngbNavItem]="1">
              <a ngbNavLink>Détails client</a>
              <ng-template ngbNavContent>
                <div class="card-body default-accordion">
                  <div ngbAccordion>
                    <!-- [collapsed]="false" -->
                    <div ngbAccordionItem>
                      <h2 ngbAccordionHeader>
                        <button ngbAccordionButton class="bg-primary text-white"><i class="icofont icofont-business-man fs-3 px-2"></i> Information personnelle</button>
                      </h2>
                      <div ngbAccordionCollapse>
                        <div ngbAccordionBody>
                          <div *ngIf="false" class="row">
                            <div class="col-xl-4 col-sm-6 col-xxl-3 col-ed-4 box-col-4">
                              <div class="card social-profile">
                                <div class="card-body">
                                  <div class="social-img-wrap">
                                    <div class="social-img"><img src="assets/images/user/2.png" alt="profile" /></div>
                                    <div class="edit-icon">
                                      <svg>
                                        <use href="assets/svg/icon-sprite.svg#profile-check"></use>
                                      </svg>
                                    </div>
                                  </div>
                                  <div class="social-details">
                                    <h5 class="mb-1">{{ currentClient.Nom }} {{ currentClient.Prenom }}</h5>
                                    <span class="f-light"> {{ currentClient.Email1 }} / {{ currentClient.Telephone1 }}</span>
                                  </div>
                                  <button class="btn btn-primary d-block w-100 mt-3">Modifier image</button>
                                </div>
                              </div>
                            </div>

                            <div class="col-xl-8">
                              <!-- <div class="card-header"><h4 class="card-title mb-0">Edit Profile</h4></div> -->
                              <div class="card-body">
                                <span class="row">
                                  <div class="form-group mb-3 col-md-6" *ngFor="let input of formClientInputs">
                                    <span *ngIf="['text', 'number', 'date'].includes(input.inputOptions.type)">
                                      <label [for]="input.field">{{ input.header }}</label>
                                      <input class="form-control" [id]="input.field" [required]="input.inputOptions.required" [type]="input.inputOptions.type" [placeholder]="input.header" [name]="input.field" [min]="input.inputOptions.min" [max]="input.inputOptions.max" [step]="input.inputOptions.step" [(ngModel)]="currentClient[input.field]" />
                                    </span>
                                    <span *ngIf="['select'].includes(input.inputOptions.type)">
                                      <label [for]="input.field">{{ input.header }}</label>
                                      <select class="form-control" [id]="input.field" [required]="input.inputOptions.required" [name]="input.field" [(ngModel)]="currentClient[input.field]">
                                        <option *ngFor="let item of input.inputOptions.selectData" [value]="item[input.inputOptions.selectValue]">{{ item[input.inputOptions.selectLibelle] }}</option>
                                      </select>
                                    </span>
                                    <span *ngIf="['checkbox'].includes(input.inputOptions.type)">
                                      <div class="form-check form-check-inline checkbox checkbox-dark mb-0">
                                        <input class="form-check-input" [id]="input.field" [required]="input.inputOptions.required" type="checkbox" [name]="input.field" [(ngModel)]="currentClient[input.field]" />
                                        <label class="form-check-label" [for]="input.field">{{ input.header }}</label>
                                      </div>
                                    </span>
                                  </div>

                                  <div class="card-footer text-end">
                                    <button class="btn btn-primary" (click)="UpdateClient()">Modifier</button>
                                  </div>
                                </span>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div ngbAccordionItem class="mt-3">
                      <h2 ngbAccordionHeader>
                        <button ngbAccordionButton class="bg-primary text-white"><i class="icofont icofont-users-alt-4 fs-3 px-2"></i> Conjoint</button>
                      </h2>
                      <div ngbAccordionCollapse>
                        <div ngbAccordionBody>
                          <ng-template>
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->

                            <div class="mb-4 mt-3" *ngFor="let conjointType of tablesConjoints">
                              <table class="table table-bordered">
                                <thead>
                                  <tr>
                                    <th [attr.colspan]="getVisibleColumns(conjointType.columns).length - 1">
                                      <b>{{ conjointType.title }}</b>
                                    </th>
                                    <th>
                                      <button (click)="dialogConjoint.Open(null, conjointType.type)" type="button" class="btn btn-primary">
                                        <i class="fa fa-plus"></i>
                                      </button>
                                    </th>
                                  </tr>
                                  <!-- table columns -->
                                  <tr class="bg-primary-subtle">
                                    <td *ngFor="let column of getVisibleColumns(conjointType.columns)">{{ column.header }}</td>
                                  </tr>
                                </thead>
                                <tbody *ngIf="GetConjoints().length === 0">
                                  <tr>
                                    <td [attr.colspan]="getVisibleColumns(conjointType.columns).length" align="center">
                                      <i>{{ conjointType.noDataMessage }}</i>
                                    </td>
                                  </tr>
                                </tbody>
                                <tbody *ngIf="GetConjoints().length > 0">
                                  <tr *ngFor="let conjoint of GetConjoints()">
                                    <td *ngFor="let column of getVisibleColumns(conjointType.columns)" [class.text-start]="column.dataType == 'string'" [class.text-center]="column.dataType == 'date' || column.dataType == 'bool' || column.dataType == null" [class.text-end]="column.dataType == 'number'">
                                      <span *ngIf="column.dataType == 'string'">{{ conjoint[column.field] }}</span>
                                      <span *ngIf="column.dataType == 'date'">{{ conjoint[column.field] | date : "dd/MM/yyyy" }}</span>
                                      <span *ngIf="column.dataType == 'datetime'">{{ conjoint[column.field] | date : "dd/MM/yyyy hh:mm:ss" }}</span>
                                      <span *ngIf="column.dataType == 'number'">{{ conjoint[column.field] }}</span>
                                      <span *ngIf="column.dataType == 'bool'">{{ conjoint[column.field] ? column.TextTrue : column.TextFalse }}</span>
                                      <span *ngIf="column.field == 'action'">
                                        <div class="d-flex justify-content-around">
                                          <a class="text-warning" (click)="dialogConjoint.Open(conjoint.ConjointId)">
                                            <i class="fa fa-pencil"></i>
                                          </a>
                                          <a class="text-danger" (click)="DeleteConjoint(conjoint.ConjointId)">
                                            <i class="fa fa-trash"></i>
                                          </a>
                                        </div>
                                      </span>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                              <div class="d-grid gap-2 d-md-flex justify-content-md-end">Total: {{ GetConjoints().length }}</div>
                            </div>
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                          </ng-template>
                        </div>
                      </div>
                    </div>
                    <div ngbAccordionItem class="mt-3">
                      <h2 ngbAccordionHeader>
                        <button ngbAccordionButton class="bg-primary text-white"><i class="icofont icofont-users-social fs-3 px-2"></i> Proches</button>
                      </h2>
                      <div ngbAccordionCollapse>
                        <div ngbAccordionBody>
                          <ng-template>
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->

                            <div class="mb-4 mt-3" *ngFor="let procheType of tablesProches">
                              <table class="table table-bordered">
                                <thead>
                                  <tr>
                                    <th [attr.colspan]="getVisibleColumns(procheType.columns).length - 1">
                                      <b>{{ procheType.title }}</b>
                                    </th>
                                    <th>
                                      <button (click)="dialogProche.Open(null, procheType.type)" type="button" class="btn btn-primary">
                                        <i class="fa fa-plus"></i>
                                      </button>
                                    </th>
                                  </tr>
                                  <!-- table columns -->
                                  <tr class="bg-primary-subtle">
                                    <td *ngFor="let column of getVisibleColumns(procheType.columns)">{{ column.header }}</td>
                                  </tr>
                                </thead>
                                <tbody *ngIf="GetProches().length === 0">
                                  <tr>
                                    <td [attr.colspan]="getVisibleColumns(procheType.columns).length" align="center">
                                      <i>{{ procheType.noDataMessage }}</i>
                                    </td>
                                  </tr>
                                </tbody>
                                <tbody *ngIf="GetProches().length > 0">
                                  <tr *ngFor="let proche of GetProches()">
                                    <td *ngFor="let column of getVisibleColumns(procheType.columns)" [class.text-start]="column.dataType == 'string'" [class.text-center]="column.dataType == 'date' || column.dataType == 'bool' || column.dataType == null" [class.text-end]="column.dataType == 'number'">
                                      <span *ngIf="column.dataType == 'string'">{{ proche[column.field] }}</span>
                                      <span *ngIf="column.dataType == 'date'">{{ proche[column.field] | date : "dd/MM/yyyy" }}</span>
                                      <span *ngIf="column.dataType == 'datetime'">{{ proche[column.field] | date : "dd/MM/yyyy hh:mm:ss" }}</span>
                                      <span *ngIf="column.dataType == 'number'">{{ proche[column.field] }}</span>
                                      <span *ngIf="column.dataType == 'bool'">{{ proche[column.field] ? column.TextTrue : column.TextFalse }}</span>
                                      <span *ngIf="column.field == 'action'">
                                        <div class="d-flex justify-content-around">
                                          <a class="text-warning" (click)="dialogProche.Open(proche.ProcheId)">
                                            <i class="fa fa-pencil"></i>
                                          </a>
                                          <a class="text-danger" (click)="DeleteProche(proche.ProcheId)">
                                            <i class="fa fa-trash"></i>
                                          </a>
                                        </div>
                                      </span>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                              <div class="d-grid gap-2 d-md-flex justify-content-md-end">Total: {{ GetProches().length }}</div>
                            </div>
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                          </ng-template>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- <div class="mt-3">
                    <button class="btn btn-primary" type="submit">Enregistrer le dossier</button>
                  </div> -->
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="2">
              <a ngbNavLink>BP</a>
              <ng-template ngbNavContent>
                <div class="card-body default-accordion">
                  <div ngbAccordion>
                    <!-- [collapsed]="false" -->
                    <div ngbAccordionItem>
                      <h2 ngbAccordionHeader>
                        <button ngbAccordionButton class="bg-primary text-white"><i class="icofont icofont-building-alt fs-3 px-2"></i> Patrimoine</button>
                      </h2>
                      <div ngbAccordionCollapse>
                        <div ngbAccordionBody>
                          <ng-template>
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <div class="mb-4 mt-3" *ngFor="let patrimoineType of tablesPatrimoines">
                              <table class="table table-bordered">
                                <thead>
                                  <tr>
                                    <th [attr.colspan]="patrimoineType.columns.length - 1">
                                      <b>{{ patrimoineType.title }}</b>
                                    </th>
                                    <th>
                                      <button (click)="dialogPatrimoine.Open(null, patrimoineType.type)" type="button" class="btn btn-primary">
                                        <i class="fa fa-plus"></i>
                                      </button>
                                    </th>
                                  </tr>
                                  <!-- table columns -->
                                  <tr class="bg-primary-subtle">
                                    <td *ngFor="let column of patrimoineType.columns">{{ column.header }}</td>
                                  </tr>
                                </thead>
                                <tbody *ngIf="GetPatrimoines(patrimoineType.type).length === 0">
                                  <tr>
                                    <td [attr.colspan]="patrimoineType.columns.length" align="center">
                                      <i>{{ patrimoineType.noDataMessage }}</i>
                                    </td>
                                  </tr>
                                </tbody>
                                <tbody *ngIf="GetPatrimoines(patrimoineType.type).length > 0">
                                  <tr *ngFor="let patrimoine of GetPatrimoines(patrimoineType.type)">
                                    <td *ngFor="let column of patrimoineType.columns" [class.text-start]="column.dataType == 'string'" [class.text-center]="column.dataType == 'date' || column.dataType == 'bool' || column.dataType == null" [class.text-end]="column.dataType == 'number'">
                                      <!-- <ng-template> -->
                                      <span *ngIf="column.dataType == 'string'">{{ patrimoine[column.field] }}</span>
                                      <span *ngIf="column.dataType == 'date'">{{ patrimoine[column.field] | date : "dd/MM/yyyy" }}</span>
                                      <span *ngIf="column.dataType == 'datetime'">{{ patrimoine[column.field] | date : "dd/MM/yyyy hh:mm:ss" }}</span>
                                      <span *ngIf="column.dataType == 'number'">{{ patrimoine[column.field] }}</span>
                                      <span *ngIf="column.dataType == 'bool'">{{ patrimoine[column.field] == true ? column.TextTrue : column.TextFalse }}</span>
                                      <span *ngIf="column.field == 'action'">
                                        <div class="d-flex justify-content-around">
                                          <a class="text-warning" (click)="dialogPatrimoine.Open(patrimoine.PatrimoineId)">
                                            <i class="fa fa-pencil"></i>
                                          </a>
                                          <a class="text-danger" (click)="DeletePatrimoine(patrimoine.PatrimoineId)">
                                            <i class="fa fa-trash"></i>
                                          </a>
                                        </div>
                                      </span>
                                      <!-- </ng-template> -->
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                              <div class="d-grid gap-2 d-md-flex justify-content-md-end" *ngIf="patrimoineType.total != null">Total: {{ patrimoineType.total | currency }} dhs</div>
                            </div>
                            <div class="form-group mb-3 col-md-6">
                              <label for="prof-commentaire">Questions complémentaires : (pas encore programmé)</label>
                              <p>quelle répartition du capital et des pouvoirs dans l'entreprise ? Quelles participations ? Comment est détenue l'immobilier professionnel ? Un pacte d'actionnaires a-t-il été signé ?</p>
                              <input class="form-control" id="prof-commentaire" type="text" placeholder="Réponse" name="ProfCommentaire" />
                            </div>
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                          </ng-template>
                        </div>
                      </div>
                    </div>

                    <div ngbAccordionItem class="mt-3">
                      <h2 ngbAccordionHeader>
                        <button ngbAccordionButton class="bg-primary text-white">
                          <span><i class="icofont icofont-bank-alt fs-3 px-2"></i> Passifs</span>
                        </button>
                      </h2>
                      <div ngbAccordionCollapse>
                        <div ngbAccordionBody>
                          <ng-template>
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <div class="mb-4 mt-3" *ngFor="let passifsType of tablesPassifs">
                              <table class="table table-bordered">
                                <thead>
                                  <tr>
                                    <th [attr.colspan]="passifsType.columns.length - 1">
                                      <b>{{ passifsType.title }}</b>
                                    </th>
                                    <th>
                                      <button (click)="dialogPassif.Open(null, passifsType.type)" type="button" class="btn btn-primary">
                                        <i class="fa fa-plus"></i>
                                      </button>
                                    </th>
                                  </tr>
                                  <tr class="bg-primary-subtle">
                                    <td *ngFor="let column of passifsType.columns">{{ column.header }}</td>
                                  </tr>
                                </thead>
                                <tbody *ngIf="GetPassifs(passifsType.type).length === 0">
                                  <tr>
                                    <td [attr.colspan]="passifsType.columns.length" align="center">
                                      <i>{{ passifsType.noDataMessage }}</i>
                                    </td>
                                  </tr>
                                </tbody>
                                <tbody *ngIf="GetPassifs(passifsType.type).length > 0">
                                  <tr *ngFor="let passif of GetPassifs(passifsType.type)">
                                    <td *ngFor="let column of passifsType.columns" [class.text-start]="column.dataType == 'string'" [class.text-center]="column.dataType == 'date' || column.dataType == 'bool' || column.dataType == null" [class.text-end]="column.dataType == 'number'">
                                      <!-- <ng-template> -->
                                      <span *ngIf="column.dataType == 'string'">{{ passif[column.field] }}</span>
                                      <span *ngIf="column.dataType == 'date'">{{ passif[column.field] | date : "dd/MM/yyyy" }}</span>
                                      <span *ngIf="column.dataType == 'datetime'">{{ passif[column.field] | date : "dd/MM/yyyy hh:mm:ss" }}</span>
                                      <span *ngIf="column.dataType == 'number'">{{ passif[column.field] }}</span>
                                      <span *ngIf="column.dataType == 'bool'">{{ passif[column.field] ? column.TextTrue : column.TextFalse }}</span>
                                      <span *ngIf="column.field == 'action'">
                                        <div class="d-flex justify-content-around">
                                          <a class="text-warning" (click)="dialogPassif.Open(passif.PassifsId)">
                                            <i class="fa fa-pencil"></i>
                                          </a>
                                          <a class="text-danger" (click)="DeletePassif(passif.PassifsId)">
                                            <i class="fa fa-trash"></i>
                                          </a>
                                        </div>
                                      </span>
                                      <!-- </ng-template> -->
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                              <div class="d-grid gap-2 d-md-flex justify-content-md-end" *ngIf="passifsType.total != null">Total: {{ passifsType.total | currency }} dhs</div>
                            </div>

                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                          </ng-template>
                        </div>
                      </div>
                    </div>
                    <div ngbAccordionItem class="mt-3">
                      <h2 ngbAccordionHeader>
                        <button ngbAccordionButton class="bg-primary text-white">
                          <i class="icofont icofont-money-bag fs-3 px-2"></i>
                          Budget
                        </button>
                      </h2>
                      <div ngbAccordionCollapse>
                        <div ngbAccordionBody>
                          <ng-template>
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->

                            <div class="mb-4 mt-3" *ngFor="let budgetType of tablesBudgets">
                              <table class="table table-bordered">
                                <thead>
                                  <tr>
                                    <th [attr.colspan]="budgetType.columns.length - 1">
                                      <b>{{ budgetType.title }}</b>
                                    </th>
                                    <th>
                                      <button (click)="dialogBudget.Open(null, budgetType.type)" type="button" class="btn btn-primary">
                                        <i class="fa fa-plus"></i>
                                      </button>
                                    </th>
                                  </tr>
                                  <!-- table columns -->
                                  <tr class="bg-primary-subtle">
                                    <td *ngFor="let column of budgetType.columns">{{ column.header }}</td>
                                  </tr>
                                </thead>
                                <tbody *ngIf="GetBudgets().length === 0">
                                  <tr>
                                    <td [attr.colspan]="budgetType.columns.length" align="center">
                                      <i>{{ budgetType.noDataMessage }}</i>
                                    </td>
                                  </tr>
                                </tbody>
                                <tbody *ngIf="GetBudgets().length > 0">
                                  <tr *ngFor="let budget of GetBudgets()">
                                    <td *ngFor="let column of budgetType.columns" [class.text-start]="column.dataType == 'string'" [class.text-center]="column.dataType == 'date' || column.dataType == 'bool' || column.dataType == null" [class.text-end]="column.dataType == 'number'">
                                      <!-- <ng-template> -->
                                      <span *ngIf="column.dataType == 'string'">{{ budget[column.field] }}</span>
                                      <span *ngIf="column.dataType == 'date'">{{ budget[column.field] | date : "dd/MM/yyyy" }}</span>
                                      <span *ngIf="column.dataType == 'datetime'">{{ budget[column.field] | date : "dd/MM/yyyy hh:mm:ss" }}</span>
                                      <span *ngIf="column.dataType == 'number'">{{ budget[column.field] }}</span>
                                      <span *ngIf="column.dataType == 'bool'">{{ budget[column.field] ? column.TextTrue : column.TextFalse }}</span>
                                      <span *ngIf="column.field == 'action'">
                                        <div class="d-flex justify-content-around">
                                          <a class="text-warning" (click)="dialogBudget.Open(budget.BudgetsId)">
                                            <i class="fa fa-pencil"></i>
                                          </a>
                                          <a class="text-danger" (click)="DeleteBudget(budget.BudgetsId)">
                                            <i class="fa fa-trash"></i>
                                          </a>
                                        </div>
                                      </span>
                                      <!-- </ng-template> -->
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                              <div class="d-grid gap-2 d-md-flex justify-content-md-end" *ngIf="budgetType.total != null">Total: {{ budgetType.total | currency : "MAD " : "symbol" : "4.2-2" }}</div>
                              <!--output '0 001,35 CA$'-->
                            </div>
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                            <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                          </ng-template>
                        </div>
                      </div>
                    </div>
                    <div ngbAccordionItem class="mt-3">
                      <h2 ngbAccordionHeader>
                        <button ngbAccordionButton class="bg-primary text-white">
                          <i class="icofont icofont-law-document fs-3 px-2"></i>
                          Particularités fiscales
                        </button>
                      </h2>
                      <div ngbAccordionCollapse>
                        <div ngbAccordionBody>
                          <ng-template>
                            <div class="row">
                              <!-- Fields for usage goods -->
                              <div class="form-group mb-3 col-md-12">
                                <label for="ParticulariteFiscale">Particularités fiscales</label>
                                <textarea class="form-control" id="ParticulariteFiscale" placeholder="Particularités fiscales" name="ParticulariteFiscale" [(ngModel)]="currentClient.ParticulariteFiscale" (keyup)="particulariteFiscaleChanged = true"></textarea>
                              </div>
                              <div class="d-grid gap-2 d-md-flex justify-content-center" *ngIf="particulariteFiscaleChanged && currentClient.ParticulariteFiscale != oldParticulariteFiscale">
                                <button class="btn btn-primary" (click)="UpdateClient()">Modifier</button>
                              </div>
                            </div>
                          </ng-template>
                        </div>
                      </div>
                    </div>
                    <div ngbAccordionItem class="mt-3">
                      <h2 ngbAccordionHeader>
                        <button ngbAccordionButton class="bg-primary text-white">
                          <i class="icofont icofont-briefcase-alt-1 fs-2 px-2"></i>
                          Situation administrative
                        </button>
                      </h2>
                      <div ngbAccordionCollapse>
                        <div ngbAccordionBody>
                          <ng-template>
                            <div class="row">
                              <div class="col-6 mb-3">
                                <div class="row">
                                  <div class="col-lg-6 col-sm-12">
                                    <label>CFE</label>
                                  </div>
                                  <div class="col-lg-6 col-sm-12">
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CFE" id="CFEOui" value="oui" [(ngModel)]="currentClient.CFE" (change)="situationAdministrativeChanged = true" />
                                      <label class="form-check-label" for="CFEOui"> Oui </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CFE" id="CFENon" value="non" [(ngModel)]="currentClient.CFE" (change)="situationAdministrativeChanged = true" />
                                      <label class="form-check-label" for="CFENon"> Non </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CFE" id="CFEAFaire" value="afaire" [(ngModel)]="currentClient.CFE" (change)="situationAdministrativeChanged = true" />
                                      <label class="form-check-label" for="CFEAFaire"> A faire </label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-6 mb-3">
                                <div class="row">
                                  <div class="col-lg-6 col-sm-12">
                                    <label>Passeport Scanné</label>
                                  </div>
                                  <div class="col-lg-6 col-sm-12">
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="Passeport" id="PasseportOui" value="oui" [(ngModel)]="currentClient.PASSEPORT" />
                                      <label class="form-check-label" for="PasseportOui"> Oui </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="Passeport" id="PasseportNon" value="non" [(ngModel)]="currentClient.PASSEPORT" />
                                      <label class="form-check-label" for="PasseportNon"> Non </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="Passeport" id="PasseportAFaire" value="afaire" [(ngModel)]="currentClient.PASSEPORT" />
                                      <label class="form-check-label" for="PasseportAFaire"> A faire </label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-6 mb-3">
                                <div class="row">
                                  <div class="col-lg-6 col-sm-12">
                                    <label>15 ans de cotisation</label>
                                  </div>
                                  <div class="col-lg-6 col-sm-12">
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="Cotisation" id="CotisationOui" value="oui" [(ngModel)]="currentClient.Cotisation" />
                                      <label class="form-check-label" for="CotisationOui"> Oui </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="Cotisation" id="CotisationNon" value="non" [(ngModel)]="currentClient.Cotisation" />
                                      <label class="form-check-label" for="CotisationNon"> Non </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="Cotisation" id="CotisationAFaire" value="afaire" [(ngModel)]="currentClient.Cotisation" />
                                      <label class="form-check-label" for="CotisationAFaire"> A faire </label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-6 mb-3">
                                <div class="row">
                                  <div class="col-lg-6 col-sm-12">
                                    <label>Carte de séjour scanée</label>
                                  </div>
                                  <div class="col-lg-6 col-sm-12">
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CarteSejour" id="CarteSejourOui" value="oui" [(ngModel)]="currentClient.CarteSejour" />
                                      <label class="form-check-label" for="CarteSejourOui"> Oui </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CarteSejour" id="CarteSejourNon" value="non" [(ngModel)]="currentClient.CarteSejour" />
                                      <label class="form-check-label" for="CarteSejourNon"> Non </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CarteSejour" id="CarteSejourAFaire" value="afaire" [(ngModel)]="currentClient.CarteSejour" />
                                      <label class="form-check-label" for="CarteSejourAFaire"> A faire </label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-6 mb-3">
                                <div class="row">
                                  <div class="col-lg-6 col-sm-12">
                                    <label>Réversion 15 ans de cotisation</label>
                                  </div>
                                  <div class="col-lg-6 col-sm-12">
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="Reversion" id="ReversionOui" value="oui" [(ngModel)]="currentClient.Reversion" />
                                      <label class="form-check-label" for="ReversionOui"> Oui </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="Reversion" id="ReversionNon" value="non" [(ngModel)]="currentClient.Reversion" />
                                      <label class="form-check-label" for="ReversionNon"> Non </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="Reversion" id="ReversionAFaire" value="afaire" [(ngModel)]="currentClient.Reversion" />
                                      <label class="form-check-label" for="ReversionAFaire"> A faire </label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-6 mb-3">
                                <div class="row">
                                  <div class="col-lg-6 col-sm-12">
                                    <label>Permis de conduire marocain</label>
                                  </div>
                                  <div class="col-lg-6 col-sm-12">
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="PermisConduire" id="PermisOui" value="oui" [(ngModel)]="currentClient.PermisConsuire" />
                                      <label class="form-check-label" for="PermisOui"> Oui </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="PermisConduire" id="PermisNon" value="non" [(ngModel)]="currentClient.PermisConsuire" />
                                      <label class="form-check-label" for="PermisNon"> Non </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="PermisConduire" id="PermisAFaire" value="afaire" [(ngModel)]="currentClient.PermisConsuire" />
                                      <label class="form-check-label" for="PermisAFaire"> A faire </label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-6 mb-3">
                                <div class="row">
                                  <div class="col-lg-6 col-sm-12">
                                    <label>CNSS</label>
                                  </div>
                                  <div class="col-lg-6 col-sm-12">
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CNSS" id="CNSSOui" value="oui" [(ngModel)]="currentClient.CNSS" />
                                      <label class="form-check-label" for="CNSSOui"> Oui </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CNSS" id="CNSSNon" value="non" [(ngModel)]="currentClient.CNSS" />
                                      <label class="form-check-label" for="CNSSNon"> Non </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CNSS" id="CNSSAFaire" value="afaire" [(ngModel)]="currentClient.CNSS" />
                                      <label class="form-check-label" for="CNSSAFaire"> A faire </label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-6 mb-3">
                                <div class="row">
                                  <div class="col-lg-6 col-sm-12">
                                    <label>Assurance Auto</label>
                                  </div>
                                  <div class="col-lg-6 col-sm-12">
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="AssuranceAuto" id="AssurAutoOui" value="oui" [(ngModel)]="currentClient.AssuranceAuto" />
                                      <label class="form-check-label" for="AssurAutoOui"> Oui </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="AssuranceAuto" id="AssurAutoNon" value="non" [(ngModel)]="currentClient.AssuranceAuto" />
                                      <label class="form-check-label" for="AssurAutoNon"> Non </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="AssuranceAuto" id="AssurAutoAFaire" value="afaire" [(ngModel)]="currentClient.AssuranceAuto" />
                                      <label class="form-check-label" for="AssurAutoAFaire"> A faire </label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-6 mb-3">
                                <div class="row">
                                  <div class="col-lg-6 col-sm-12">
                                    <label>CNAREFE</label>
                                  </div>
                                  <div class="col-lg-6 col-sm-12">
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CNAREFE" id="CNAREFEOui" value="oui" [(ngModel)]="currentClient.CNAREFE" />
                                      <label class="form-check-label" for="CNAREFEOui"> Oui </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CNAREFE" id="CNAREFENon" value="non" [(ngModel)]="currentClient.CNAREFE" />
                                      <label class="form-check-label" for="CNAREFENon"> Non </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CNAREFE" id="CNAREFEAFaire" value="afaire" [(ngModel)]="currentClient.CNAREFE" />
                                      <label class="form-check-label" for="CNAREFEAFaire"> A faire </label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-6 mb-3">
                                <div class="row">
                                  <div class="col-lg-6 col-sm-12">
                                    <label>Assurance Habitation</label>
                                  </div>
                                  <div class="col-lg-6 col-sm-12">
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="AssuranceHabitation" id="AssurHabiOui" value="oui" [(ngModel)]="currentClient.AssuranceHabitation" />
                                      <label class="form-check-label" for="AssurHabiOui"> Oui </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="AssuranceHabitation" id="AssurHabiNon" value="non" [(ngModel)]="currentClient.AssuranceHabitation" />
                                      <label class="form-check-label" for="AssurHabiNon"> Non </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="AssuranceHabitation" id="AssurHabiAFaire" value="afaire" [(ngModel)]="currentClient.AssuranceHabitation" />
                                      <label class="form-check-label" for="AssurHabiAFaire"> A faire </label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-6 mb-3">
                                <div class="row">
                                  <div class="col-lg-6 col-sm-12">
                                    <label>Capitone</label>
                                  </div>
                                  <div class="col-lg-6 col-sm-12">
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CAPITONE" id="CapitoneOui" value="oui" [(ngModel)]="currentClient.CAPITONE" />
                                      <label class="form-check-label" for="CapitoneOui"> Oui </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CAPITONE" id="CapitoneNon" value="non" [(ngModel)]="currentClient.CAPITONE" />
                                      <label class="form-check-label" for="CapitoneNon"> Non </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CAPITONE" id="CapitoneAFaire" value="afaire" [(ngModel)]="currentClient.CAPITONE" />
                                      <label class="form-check-label" for="CapitoneAFaire"> A faire </label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-6 mb-3">
                                <div class="row">
                                  <div class="col-lg-6 col-sm-12">
                                    <label>Inscription consulat</label>
                                  </div>
                                  <div class="col-lg-6 col-sm-12">
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="InscriptionConsulat" id="InscriConsulatOui" value="oui" [(ngModel)]="currentClient.InscriptionConsulat" />
                                      <label class="form-check-label" for="InscriConsulatOui"> Oui </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="InscriptionConsulat" id="InscriConsulatNon" value="non" [(ngModel)]="currentClient.InscriptionConsulat" />
                                      <label class="form-check-label" for="InscriConsulatNon"> Non </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="InscriptionConsulat" id="InscriConsulatAFaire" value="afaire" [(ngModel)]="currentClient.InscriptionConsulat" />
                                      <label class="form-check-label" for="InscriConsulatAFaire"> A faire </label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-6 mb-3">
                                <div class="row">
                                  <div class="col-lg-6 col-sm-12">
                                    <label>Assurance Rapatriement</label>
                                  </div>
                                  <div class="col-lg-6 col-sm-12">
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="AssuranceRapatriement" id="RapatriementOui" value="oui" [(ngModel)]="currentClient.AssuranceRapatriement" />
                                      <label class="form-check-label" for="RapatriementOui"> Oui </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="AssuranceRapatriement" id="RapatriementNon" value="non" [(ngModel)]="currentClient.AssuranceRapatriement" />
                                      <label class="form-check-label" for="RapatriementNon"> Non </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="AssuranceRapatriement" id="RapatriementAFaire" value="afaire" [(ngModel)]="currentClient.AssuranceRapatriement" />
                                      <label class="form-check-label" for="RapatriementAFaire"> A faire </label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-6 mb-3">
                                <div class="row">
                                  <div class="col-lg-6 col-sm-12">
                                    <label>CPAM</label>
                                  </div>
                                  <div class="col-lg-6 col-sm-12">
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CPAM" id="CPAMOui" value="oui" [(ngModel)]="currentClient.CPAM" />
                                      <label class="form-check-label" for="CPAMOui"> Oui </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CPAM" id="CPAMNon" value="non" [(ngModel)]="currentClient.CPAM" />
                                      <label class="form-check-label" for="CPAMNon"> Non </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CPAM" id="CPAMAFaire" value="afaire" [(ngModel)]="currentClient.CPAM" />
                                      <label class="form-check-label" for="CPAMAFaire"> A faire </label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-6 mb-3">
                                <div class="row">
                                  <div class="col-lg-6 col-sm-12">
                                    <label>Mutuelle Française</label>
                                  </div>
                                  <div class="col-lg-6 col-sm-12">
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="MutuelleFrancaise" id="MutuelleOui" value="oui" [(ngModel)]="currentClient.MutuelleFrancaise" />
                                      <label class="form-check-label" for="MutuelleOui"> Oui </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="MutuelleFrancaise" id="MutuelleNon" value="non" [(ngModel)]="currentClient.MutuelleFrancaise" />
                                      <label class="form-check-label" for="MutuelleNon"> Non </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="MutuelleFrancaise" id="MutuelleAFaire" value="afaire" [(ngModel)]="currentClient.MutuelleFrancaise" />
                                      <label class="form-check-label" for="MutuelleAFaire"> A faire </label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-6 mb-3">
                                <div class="row">
                                  <div class="col-lg-6 col-sm-12">
                                    <label>CSG / CRDS</label>
                                  </div>
                                  <div class="col-lg-6 col-sm-12">
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CSG_CRDS" id="CSGOui" value="oui" [(ngModel)]="currentClient.CSG_CRDS" />
                                      <label class="form-check-label" for="CSGOui"> Oui </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CSG_CRDS" id="CSGNon" value="non" [(ngModel)]="currentClient.CSG_CRDS" />
                                      <label class="form-check-label" for="CSGNon"> Non </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                      <input class="form-check-input" type="radio" name="CSG_CRDS" id="CSGAFaire" value="afaire" [(ngModel)]="currentClient.CSG_CRDS" />
                                      <label class="form-check-label" for="CSGAFaire">A faire</label>
                                    </div>
                                  </div>
                                </div>
                              </div>

                              <div class="d-grid gap-2 d-md-flex justify-content-center">
                                <button class="btn btn-primary" (click)="UpdateClient()">Modifier</button>
                              </div>
                            </div>
                          </ng-template>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- <div class="mt-3">
                    <button class="btn btn-primary" type="submit">Enregistrer le dossier</button>
                  </div> -->
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="3">
              <a ngbNavLink>Tâches</a>
              <ng-template ngbNavContent>
                <div class="table-responsive edit-table">
                  <!-- <table class="table card-table table-vcenter text-nowrap">
                    <thead>
                      <tr>
                        <th class="task-column">Tâche</th>
                        <th>Date</th>
                        <th>Status</th>
                        <th>Prestation</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let task of tasks">
                        <td class="task-column">
                          <a class="text-inherit" href="javascript:void(0)">{{ task.title }}</a>
                        </td>
                        <td>{{ task.date }}</td>
                        <td>
                          <span [class]="'badge ' + task.statusClass">{{ task.status }}</span>
                        </td>
                        <td>{{ task.prestation }}</td>
                        <td class="text-start">
                          <div class="d-flex justify-content-around">
                            <a class="fs-2 text-warning" href="javascript:void(0)"> <i class="fa fa-pencil"></i></a>
                            <a class="fs-2 text-danger" href="javascript:void(0)">
                              <i class="fa fa-trash"></i>
                            </a>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table> -->
                  <table class="table card-table table-vcenter text-nowrap">
                    <thead>
                      <tr>
                        <th>Tâche</th>
                        <th>Numéro Ordre</th>
                        <th>Status</th>
                        <th>Prestation</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let task of currentClient.ClientTaches">
                        <td>{{ task.TacheIntitule }}</td>
                        <td>{{ task.Numero_Ordre }}</td>
                        <td>
                          <span [class]="'badge ' + task.Status">{{ task.Status }}</span>
                        </td>
                        <td>{{ task.PrestationDesignation }}</td>
                        <td class="text-start">
                          <div class="d-flex justify-content-around">
                            <a class="fs-2 text-warning" href="javascript:void(0)">
                              <i class="fa fa-pencil"></i>
                            </a>
                            <a class="fs-2 text-danger" href="javascript:void(0)">
                              <i class="fa fa-trash"></i>
                            </a>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="4">
              <a ngbNavLink>Pièces</a>
              <ng-template ngbNavContent>
                <div class="col-xl-12 col-md-12 box-col-12">
                  <div class="file-content">
                    <div class="card">
                      <div class="card-header">
                        <div class="media">
                          <div class="form-inline" *ngIf="currentClient.ClientPieces.length > 0">
                            <div class="form-group mb-0">
                              <i class="fa fa-search"></i>
                              <input class="form-control-plaintext" type="text" placeholder="Chercher..." (keyup)="OnSearchPieceKeyUp($event)" [(ngModel)]="filterPiecesText" />
                            </div>
                          </div>
                          <div class="media-body text-end">
                            <!-- <form class="d-inline-flex" action="#" method="POST" enctype="multipart/form-data" name="myForm">
                              <div class="btn btn-primary me-2" onclick="getFile()"><app-feather-icons [icon]="'plus-square'"></app-feather-icons>Add New</div>
                              <div style="height: 0px; width: 0px; overflow: hidden">
                                <input id="upfile" type="file" onchange="sub(this)" />
                              </div>
                            </form> -->
                            <div class="btn btn-outline-primary" (click)="dialogImportPiece.Open(modalUploadClientPiece)"><app-feather-icons [icon]="'upload'"> </app-feather-icons>Importer</div>
                          </div>
                        </div>
                      </div>
                      <div class="card-body file-manager">
                        <h4 class="mb-3" *ngIf="filtredClientPieces.length == 0">Aucune pièce importé</h4>
                        <h4 class="mb-3" *ngIf="filtredClientPieces.length > 0">Toutes les pièces</h4>
                        <!-- <h6>Pièces de {{currentClient.Nom + ' '+currentClient.Prenom}}</h6> -->
                        <ul class="files">
                          <li class="file-box me-1" *ngFor="let clientPiece of filtredClientPieces; let index = index">
                            <div class="file-top">
                              <i *ngIf="['png', 'jpg', 'jpeg'].includes(clientPiece.Extension)" class="fa fa-file-image-o txt-primary"></i>
                              <i *ngIf="['pdf'].includes(clientPiece.Extension)" class="fa fa-file-text-o txt-primary"></i>
                              <i class="fa fa-ellipsis-v f-14 ellips" (click)="OpenPieceTools(clientPiece.ClientPieceId)"></i>
                            </div>
                            <div class="file-bottom">
                              <h6>{{ clientPiece.Libelle }}</h6>
                              <p class="mb-1">{{ clientPiece.Extension }}</p>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </li>
          </ul>
          <div [ngbNavOutlet]="nav" class="mt-2"></div>
        </div>
      </div>
    </div>

    <ng-template #modalUploadClientPiece let-modal>
      <div class="modal-header">
        <h4 class="modal-title">Importation de pièce</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
      </div>
      <div class="modal-body">
        <div class="col-lg-12">
          <div class="row">
            <div class="col">
              <div class="mb-3">
                <label for="piece">Pièce</label>
                <select class="form-control" placeholder="Piece" [(ngModel)]="dialogImportPiece.SelectedPiece">
                  <option *ngFor="let piece of dialogImportPiece.PiecesToChoose" [value]="piece.PieceId">
                    {{ piece.Libelle }}
                  </option>
                </select>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="mb-3">
                <label for="piece">Fichier</label>
                <input class="form-control" type="file" id="importFile" name="importFile" accept=".pdf" title="Importer le fichier" [(ngModel)]="dialogImportPiece.SelectedFile" (change)="dialogImportPiece.OnFileChange($event)" />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="dialogImportPiece.Submit()" [disabled]="!dialogImportPiece.FileReady">Importer</button>
        <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Fermer</button>
      </div>
    </ng-template>

    <!-- Modal for option piece -->

    <!-- #region DialogPatrimoine -->

    <ng-template #DialogPatrimoine let-modal>
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="DialogPatrimoineLabel">
          {{ dialogPatrimoine.title }}
        </h1>
        <button type="button" class="btn-close" (click)="dialogPatrimoine.Close()"></button>
      </div>
      <div class="modal-body row modal-body-scrollable" *ngIf="dialogPatrimoine.data != null">
        <div class="form-group mb-3 col-md-6" *ngFor="let input of dialogPatrimoine.Inputs">
          <span *ngIf="['text', 'number', 'date'].includes(input.inputOptions.type)">
            <label [for]="input.field">{{ input.header }}</label>
            <input class="form-control" [id]="input.field" [required]="input.inputOptions.required" [type]="input.inputOptions.type" [placeholder]="input.header" [name]="input.field" [min]="input.inputOptions.min" [max]="input.inputOptions.max" [step]="input.inputOptions.step" [(ngModel)]="dialogPatrimoine.data[input.field]" />
          </span>
          <span *ngIf="['select'].includes(input.inputOptions.type)">
            <label [for]="input.field">{{ input.header }}</label>
            <select class="form-control" [id]="input.field" [required]="input.inputOptions.required" [name]="input.field" [(ngModel)]="dialogPatrimoine.data[input.field]">
              <option *ngFor="let item of input.inputOptions.selectData" [value]="item[input.inputOptions.selectValue]">{{ item[input.inputOptions.selectLibelle] }}</option>
            </select>
          </span>
          <span *ngIf="['checkbox'].includes(input.inputOptions.type)">
            <div class="form-check form-check-inline checkbox checkbox-dark mb-0">
              <input class="form-check-input" [id]="input.field" [required]="input.inputOptions.required" type="checkbox" [name]="input.field" [(ngModel)]="dialogPatrimoine.data[input.field]" />
              <label class="form-check-label" [for]="input.field">{{ input.header }}</label>
            </div>
          </span>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" (click)="dialogPatrimoine.Submit()">
          <span *ngIf="dialogPatrimoine.isEditing == false">Ajouter</span>
          <span *ngIf="dialogPatrimoine.isEditing == true">Modifier</span>
        </button>
        <button type="button" class="btn btn-secondary" (click)="dialogPatrimoine.Close()">Fermer</button>
      </div>
    </ng-template>

    <!-- #endregion DialogPatrimoine -->

    <!-- #region DialogPassif -->

    <ng-template #DialogPassif let-modal>
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="DialogPassifLabel">
          {{ dialogPassif.title }}
        </h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" (click)="dialogPassif.Close()"></button>
      </div>
      <div class="modal-body row modal-body-scrollable" *ngIf="dialogPassif.data != null">
        <div class="form-group mb-3 col-md-6" *ngFor="let input of dialogPassif.Inputs">
          <span *ngIf="['text', 'number', 'date'].includes(input.inputOptions.type)">
            <label [for]="input.field">{{ input.header }}</label>
            <input class="form-control" [id]="input.field" [required]="input.inputOptions.required" [type]="input.inputOptions.type" [placeholder]="input.header" [name]="input.field" [min]="input.inputOptions.min" [max]="input.inputOptions.max" [step]="input.inputOptions.step" [(ngModel)]="dialogPassif.data[input.field]" />
          </span>
          <span *ngIf="['select'].includes(input.inputOptions.type)">
            <label [for]="input.field">{{ input.header }}</label>
            <select class="form-control" [id]="input.field" [required]="input.inputOptions.required" [name]="input.field" [(ngModel)]="dialogPassif.data[input.field]">
              <option *ngFor="let item of input.inputOptions.selectData" [value]="item[input.inputOptions.selectValue]">{{ item[input.inputOptions.selectLibelle] }}</option>
            </select>
          </span>
          <span *ngIf="['checkbox'].includes(input.inputOptions.type)">
            <!-- <label [for]="input.field">{{ input.header }}</label> -->
            <!-- <input class="form-control" [id]="input.field" [required]="input.inputOptions.required" type="checkbox" [name]="input.field" [(ngModel)]="dialogPatrimoine.data[input.field]" /> -->
            <div class="form-check form-check-inline checkbox checkbox-dark mb-0">
              <input class="form-check-input" [id]="input.field" [required]="input.inputOptions.required" type="checkbox" [name]="input.field" [(ngModel)]="dialogPassif.data[input.field]" />
              <label class="form-check-label" [for]="input.field">{{ input.header }}</label>
            </div>
          </span>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" (click)="dialogPassif.Submit()">
          <span *ngIf="dialogPassif.isEditing == false">Ajouter</span>
          <span *ngIf="dialogPassif.isEditing == true">Modifier</span>
        </button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="dialogPassif.Close()">Fermer</button>
      </div>
    </ng-template>

    <!-- #endregion DialogPassif -->

    <!-- #region DialogBudget -->

    <ng-template #DialogBudget let-modal>
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="DialogBudgetLabel">
          {{ dialogBudget.title }}
        </h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" (click)="dialogBudget.Close()"></button>
      </div>
      <div class="modal-body row modal-body-scrollable" *ngIf="dialogBudget.data != null">
        <div class="form-group mb-3 col-md-6" *ngFor="let input of dialogBudget.Inputs">
          <span *ngIf="['text', 'number', 'date'].includes(input.inputOptions.type)">
            <label [for]="input.field">{{ input.header }}</label>
            <input class="form-control" [id]="input.field" [required]="input.inputOptions.required" [type]="input.inputOptions.type" [placeholder]="input.header" [name]="input.field" [min]="input.inputOptions.min" [max]="input.inputOptions.max" [step]="input.inputOptions.step" [(ngModel)]="dialogBudget.data[input.field]" />
          </span>
          <span *ngIf="['select'].includes(input.inputOptions.type)">
            <label [for]="input.field">{{ input.header }}</label>
            <select class="form-control" [id]="input.field" [required]="input.inputOptions.required" [name]="input.field" [(ngModel)]="dialogBudget.data[input.field]">
              <option *ngFor="let item of input.inputOptions.selectData" [value]="item[input.inputOptions.selectValue]">{{ item[input.inputOptions.selectLibelle] }}</option>
            </select>
          </span>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" (click)="dialogBudget.Submit()">
          <span *ngIf="dialogBudget.isEditing == false">Ajouter</span>
          <span *ngIf="dialogBudget.isEditing == true">Modifier</span>
        </button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="dialogBudget.Close()">Fermer</button>
      </div>
    </ng-template>

    <!-- #endregion DialogBudget -->

    <!-- #region DialogProche -->

    <ng-template #DialogProche let-modal>
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="DialogProcheLabel">
          {{ dialogProche.title }}
        </h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" (click)="dialogProche.Close()"></button>
      </div>
      <div class="modal-body row modal-body-scrollable" *ngIf="dialogProche.data != null">
        <div class="form-group mb-3 col-md-6" *ngFor="let input of dialogProche.Inputs">
          <span *ngIf="['text', 'number', 'date'].includes(input.inputOptions.type)">
            <label [for]="input.field">{{ input.header }}</label>
            <input class="form-control" [id]="input.field" [required]="input.inputOptions.required" [type]="input.inputOptions.type" [placeholder]="input.header" [name]="input.field" [min]="input.inputOptions.min" [max]="input.inputOptions.max" [step]="input.inputOptions.step" [(ngModel)]="dialogProche.data[input.field]" />
          </span>
          <span *ngIf="['select'].includes(input.inputOptions.type)">
            <label [for]="input.field">{{ input.header }}</label>
            <select class="form-control" [id]="input.field" [required]="input.inputOptions.required" [name]="input.field" [(ngModel)]="dialogProche.data[input.field]">
              <option *ngFor="let item of input.inputOptions.selectData" [value]="item[input.inputOptions.selectValue]">{{ item[input.inputOptions.selectLibelle] }}</option>
            </select>
          </span>
          <span *ngIf="['checkbox'].includes(input.inputOptions.type)">
            <div class="form-check form-check-inline checkbox checkbox-dark mb-0">
              <input class="form-check-input" [id]="input.field" [required]="input.inputOptions.required" type="checkbox" [name]="input.field" [(ngModel)]="dialogProche.data[input.field]" />
              <label class="form-check-label" [for]="input.field">{{ input.header }}</label>
            </div>
          </span>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" (click)="dialogProche.Submit()">
          <span *ngIf="dialogProche.isEditing == false">Ajouter</span>
          <span *ngIf="dialogProche.isEditing == true">Modifier</span>
        </button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="dialogProche.Close()">Fermer</button>
      </div>
    </ng-template>

    <!-- #endregion DialogProche -->

    <!-- #region DialogConjoint -->

    <ng-template #DialogConjoint let-modal>
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="DialogConjointLabel">
          {{ dialogConjoint.title }}
        </h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" (click)="dialogConjoint.Close()"></button>
      </div>
      <div class="modal-body row modal-body-scrollable" *ngIf="dialogConjoint.data != null">
        <div class="form-group mb-3 col-md-6" *ngFor="let input of dialogConjoint.Inputs">
          <span *ngIf="['text', 'number', 'date'].includes(input.inputOptions.type)">
            <label [for]="input.field">{{ input.header }}</label>
            <input class="form-control digits" [id]="input.field" [required]="input.inputOptions.required" [type]="input.inputOptions.type" [placeholder]="input.header" [name]="input.field" [min]="input.inputOptions.min" [max]="input.inputOptions.max" [step]="input.inputOptions.step" [(ngModel)]="dialogConjoint.data[input.field]" />
          </span>
          <span *ngIf="['select'].includes(input.inputOptions.type)">
            <label [for]="input.field">{{ input.header }}</label>
            <select class="form-control" [id]="input.field" [required]="input.inputOptions.required" [name]="input.field" [(ngModel)]="dialogConjoint.data[input.field]">
              <option *ngFor="let item of input.inputOptions.selectData" [value]="item[input.inputOptions.selectValue]">{{ item[input.inputOptions.selectLibelle] }}</option>
            </select>
          </span>
          <span *ngIf="['checkbox'].includes(input.inputOptions.type)">
            <div class="form-check form-check-inline checkbox checkbox-dark mb-0">
              <input class="form-check-input" [id]="input.field" [required]="input.inputOptions.required" type="checkbox" [name]="input.field" [(ngModel)]="dialogConjoint.data[input.field]" />
              <label class="form-check-label" [for]="input.field">{{ input.header }}</label>
            </div>
          </span>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" (click)="dialogConjoint.Submit()">
          <span *ngIf="dialogConjoint.isEditing == false">Ajouter</span>
          <span *ngIf="dialogConjoint.isEditing == true">Modifier</span>
        </button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="dialogConjoint.Close()">Fermer</button>
      </div>
    </ng-template>

    <!-- #endregion DialogConjoint -->
  </div>
</div>
